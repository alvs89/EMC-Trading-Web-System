<!--
  index..html
  Purpose: Main UI for the Inventory Management web app.
  Contains:
    - Header / page title
    - Search + filter controls
    - Inventory table (list of items)
    - Dialogs: Add Item, Stock In, Stock Out
  Notes:
    - Styling uses Tailwind CDN for quick prototyping.
    - lucide icons are initialized at the bottom of the page.
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Inventory Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
      /* Custom styles to handle specific visual requirements */
      body {
        font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont,
          "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
        background-color: #f9fafb; /* bg-gray-50 */
      }
      /* Custom gradient for the header to match the image */
      .header-gradient {
        background: linear-gradient(90deg, #ff4c4c 0%, #ff8c4c 100%);
      }
      /* Style the custom select dropdown to look like the image */
      .custom-select {
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='currentColor'%3E%3Cpath fill-rule='evenodd' d='M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z' clip-rule='evenodd' /%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 0.5rem center;
        background-size: 1.5em 1.5em;
        padding-right: 2.5rem;
        cursor: pointer;
      }

      /* Toast Container */
      #toast-container {
        position: fixed;
        top: 1rem;
        right: 1rem;
        z-index: 1000;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

      /* Toast Styles */
      .toast {
        padding: 1rem 1.25rem;
        border-radius: 0.5rem;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
          0 2px 4px -1px rgba(0, 0, 0, 0.06);
        color: white;
        opacity: 0;
        transform: translateY(-20px);
        transition: opacity 0.3s ease-out, transform 0.3s ease-out;
        min-width: 250px;
        max-width: 350px;
      }

      .toast.show {
        opacity: 1;
        transform: translateY(0);
      }

      .toast-success {
        background-color: #22c55e; /* green-500 */
      }

      .toast-warning {
        background-color: #f97316; /* orange-500 */
      }

      .toast-error {
        background-color: #ef4444; /* red-500 */
      }

      .toast-title {
        font-weight: 600;
        font-size: 0.95rem;
      }

      .toast-description {
        font-size: 0.85rem;
        opacity: 0.9;
        margin-top: 0.25rem;
      }

      /* Sort arrows (text-based) styling */
      .sort-arrows {
        font-size: 0.85rem;
        line-height: 1;
        display: inline-flex;
        align-items: center;
      }

      .sort-arrows span {
        display: inline-block;
        min-width: 0.9rem;
        text-align: center;
      }

      /* muted color for inactive */
      .text-slate-400 {
        color: #94a3b8;
      }

      /* active color */
      .text-blue-600 {
        color: #2563eb;
      }

      .font-semibold {
        font-weight: 600;
      }

      /* Slightly compressed table: use fixed layout and fit to available width */
      #inventory-table {
        width: 100%;
        table-layout: fixed; /* stable column widths; uses col widths / min-widths below */
        border-collapse: collapse;
        font-size: 13px;
      }

      /* Reduce general cell padding so columns are closer */
      #inventory-table th,
      #inventory-table td {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        padding: 8px 10px; /* smaller padding */
        vertical-align: middle;
        font-size: 13px;
      }

      /* Make Status column wrap and display two lines (status + reorder) */
      #inventory-table th:nth-child(8),
      #inventory-table td:nth-child(8) {
        white-space: normal;
        vertical-align: middle;
      }

      /* Stack status and reorder badge vertically */
      .status-cell {
        display: inline-flex;
        flex-direction: column;
        gap: 0.25rem;
        align-items: flex-start;
        line-height: 1.05;
      }

      /* Column-specific minimum widths (compressed to fit typical viewport) */
      #inventory-table th:nth-child(1),
      #inventory-table td:nth-child(1) { min-width: 56px; }   /* ID */
      #inventory-table th:nth-child(2),
      #inventory-table td:nth-child(2) { min-width: 240px; }  /* Item Name */
      #inventory-table th:nth-child(3),
      #inventory-table td:nth-child(3) { min-width: 140px; }  /* Supplier */
      #inventory-table th:nth-child(4),
      #inventory-table td:nth-child(4) { min-width: 100px; }  /* Category */
      #inventory-table th:nth-child(5),
      #inventory-table td:nth-child(5) { min-width: 70px; }   /* Unit */
      #inventory-table th:nth-child(6),
      #inventory-table td:nth-child(6) { min-width: 70px; }   /* Quantity */
      #inventory-table th:nth-child(7),
      #inventory-table td:nth-child(7) { min-width: 90px; }   /* Reorder Level */
      #inventory-table th:nth-child(8),
      #inventory-table td:nth-child(8) { min-width: 100px; }  /* Status */
      #inventory-table th:nth-child(9),
      #inventory-table td:nth-child(9) { min-width: 100px; }  /* Last Updated */
      #inventory-table th:nth-child(10),
      #inventory-table td:nth-child(10) { min-width: 100px; } /* Image */
      #inventory-table th:nth-child(11),
      #inventory-table td:nth-child(11) { min-width: 90px; }  /* Actions */

      /* Make image thumbnails smaller so they fit */
      #inventory-table td img {
        max-width: 80px;
        max-height: 48px;
        object-fit: cover;
        border-radius: 4px;
      }

      /* Slightly tighter header style */
      #inventory-table thead th {
        background: #f8fafc;
        z-index: 50;
        padding-top: 10px;
        padding-bottom: 10px;
        font-size: 12px;
      }
    </style>
  </head>
  <body class="min-h-screen">
    <div id="toast-container"></div>

    <!-- Page container: main content area -->
    <div class="p-8 max-w-full mx-auto">
      <!-- Header: title and short description -->
      <div class="mb-6 rounded-lg overflow-hidden shadow-xl">
        <div class="header-gradient p-8">
          <h1 class="text-3xl font-bold text-white">Inventory Management</h1>
          <p class="text-white opacity-90">
            Manage stock levels and product inventory
          </p>
        </div>
      </div>

      <!-- Controls: Search box, Category filter, Add Item button -->
      <!-- This section lets users quickly find items or filter by category -->
      <div class="mb-6 bg-white rounded-lg shadow-md border border-gray-200">
        <div class="p-4">
          <div class="flex flex-col md:flex-row gap-4">
            <!-- Search input -->
            <div class="flex-1 relative">
              <i
                data-lucide="search"
                class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-400"
              ></i>
              <input
                type="text"
                id="search-input"
                placeholder="Search by name or ID..."
                class="pl-10 h-10 w-full rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition duration-150 ease-in-out px-3 py-2 text-sm"
              />
            </div>

            <!-- Category filter dropdown -->
            <div
              class="w-full md:w-48 relative flex items-center border border-gray-300 rounded-lg h-10 px-2 bg-white"
            >
              <i data-lucide="filter" class="w-4 h-4 mr-2 text-gray-500"></i>
              <select
                id="category-filter"
                class="custom-select w-full bg-transparent text-sm h-full pr-8"
              >
                <option value="all">All Categories</option>
              </select>
            </div>

            <!-- Mobile add item button -->
            <button
              id="add-item-button"
              class="md:hidden flex items-center justify-center h-10 px-4 text-sm font-semibold rounded-lg text-white bg-slate-700 hover:bg-slate-800 transition-colors duration-200 shadow-md"
            >
              <i data-lucide="plus" class="w-4 h-4 mr-2"></i>
              Add Item
            </button>
          </div>
        </div>
      </div>

      <!-- Inventory Table -->
      <!-- Displays the list of inventory items with supplier, category, unit, stock, status, image and actions -->
      <div class="bg-white rounded-lg shadow-md border border-gray-200">
        <div class="p-6 border-b border-gray-200">
          <div class="flex items-center justify-between">
            <div>
              <h2 class="text-xl font-semibold text-gray-900">
                Inventory Items
              </h2>
              <p id="inventory-info" class="text-sm text-gray-500 mt-1">
                9 items found • Sorted by Last Updated (Z-A)
              </p>
            </div>

            <!-- Desktop add item button -->
            <button
              id="add-item-button-desktop"
              class="hidden md:flex items-center h-10 px-4 text-sm font-semibold rounded-lg text-white bg-slate-700 hover:bg-slate-800 transition-colors duration-200 shadow-md"
            >
              <i data-lucide="plus" class="w-4 h-4 mr-2"></i>
              Add Item
            </button>
          </div>
        </div>

        <!-- Table wrapper: contains the table rows rendered by script.js -->
        <div class="">
          <table
            class="min-w-full divide-y divide-gray-200"
            id="inventory-table"
          >
            <thead class="bg-gray-50">
              <tr>
                <!-- Column headers (sorting applied via data-sort on buttons) -->
                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                  <button data-sort="id" class="sort-button flex items-center p-2 rounded-md hover:bg-gray-100 transition-colors duration-150">
                    ID
                  </button>
                </th>
                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                  <button data-sort="name" class="sort-button flex items-center p-2 rounded-md hover:bg-gray-100 transition-colors duration-150">
                    Item Name
                  </button>
                </th>

                <!-- Supplier -->
                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                  Supplier
                </th>

                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Category</th>

                <!-- Unit -->
                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Unit</th>

                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                  <button data-sort="quantity" class="sort-button flex items-center p-2 rounded-md hover:bg-gray-100 transition-colors duration-150">
                    Quantity
                  </button>
                </th>

                <!-- Reorder Level -->
                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Reorder Level</th>

                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Status</th>
                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">
                  <button data-sort="lastUpdated" class="sort-button flex items-center p-2 rounded-md hover:bg-gray-100 transition-colors duration-150">
                    Last Updated
                  </button>
                </th>

                <!-- Image -->
                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Image</th>

                <!-- Actions -->
                <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">Actions</th>
              </tr>
            </thead>
            <tbody
              class="bg-white divide-y divide-gray-200"
              id="inventory-table-body"
            ></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Add Item Dialog -->
    <!-- Modal form used to add a new inventory item. Fields are validated in script.js -->
    <div
      id="add-item-dialog"
      class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 hidden"
      role="dialog"
      aria-modal="true"
    >
      <div class="bg-white rounded-lg shadow-xl w-full max-w-md m-4">
        <div class="p-6">
          <h3 class="text-xl font-semibold text-gray-900">Add New Inventory Item</h3>
          <p class="text-sm text-gray-500 mt-1">
            Fill out the form to register a new item in the system.
          </p>

          <!-- Add Item Form (id="add-item-form") is handled by script.js -->
          <form id="add-item-form" class="mt-4 space-y-4" enctype="multipart/form-data">
            <!-- 1️⃣ Item Name -->
            <div>
              <label for="item-name" class="block text-sm font-medium text-gray-700">Item Name</label>
              <input
                type="text"
                id="item-name"
                name="item-name"
                placeholder="e.g., Steel Hammer"
                required
                class="mt-1 block w-full h-10 rounded-lg border border-gray-300 px-3 py-2 text-sm"
              />
            </div>

            <!-- 2️⃣ Category Name -->
            <div>
              <label for="category-name" class="block text-sm font-medium text-gray-700">Category</label>
              <input
                type="text"
                id="category-name"
                name="category-name"
                placeholder="e.g., Tools, Paint, Electrical"
                required
                class="mt-1 block w-full h-10 rounded-lg border border-gray-300 px-3 py-2 text-sm"
              />
            </div>

            <!-- 3️⃣ Initial Quantity -->
            <div>
              <label for="initial-quantity" class="block text-sm font-medium text-gray-700">Initial Quantity</label>
              <input
                type="number"
                id="initial-quantity"
                name="initial-quantity"
                min="0"
                placeholder="Enter starting stock quantity"
                required
                class="mt-1 block w-full h-10 rounded-lg border border-gray-300 px-3 py-2 text-sm"
              />
            </div>

            <!-- 4️⃣ Supplier Name -->
            <div>
              <label for="supplier-name" class="block text-sm font-medium text-gray-700">Supplier Name</label>
              <input
                type="text"
                id="supplier-name"
                name="supplier-name"
                placeholder="e.g., ABC Hardware Supply"
                required
                class="mt-1 block w-full h-10 rounded-lg border border-gray-300 px-3 py-2 text-sm"
              />
            </div>

            <!-- 5️⃣ Upload Image -->
            <div>
              <label for="item-image" class="block text-sm font-medium text-gray-700">Upload Item Image</label>
              <input
                type="file"
                id="item-image"
                name="item-image"
                accept="image/*"
                class="mt-1 block w-full text-sm text-gray-700 border border-gray-300 rounded-lg cursor-pointer bg-gray-50"
              />
            </div>

            <!-- 6️⃣ Date Added -->
            <div>
              <label for="date-added" class="block text-sm font-medium text-gray-700">Date Added</label>
              <input
                type="date"
                id="date-added"
                name="date-added"
                required
                class="mt-1 block w-full h-10 rounded-lg border border-gray-300 px-3 py-2 text-sm"
              />
            </div>

            <!-- 7️⃣ Unit -->
            <div>
              <label for="unit" class="block text-sm font-medium text-gray-700">Unit</label>
              <select
                id="unit"
                name="unit"
                required
                class="mt-1 block w-full h-10 rounded-lg border border-gray-300 px-3 py-2 text-sm bg-white"
              >
                <option value="">Select Unit</option>
                <option value="pcs">pcs</option>
                <option value="box">box</option>
                <option value="liter">liter</option>
                <option value="kg">kg</option>
              </select>
            </div>

            <!-- 8️⃣ Reorder Level -->
            <div>
              <label for="reorder-level" class="block text-sm font-medium text-gray-700">
                Reorder Level
              </label>
              <input
                type="number"
                id="reorder-level"
                name="reorder-level"
                min="1"
                placeholder="e.g., 20"
                class="mt-1 block w-full h-10 rounded-lg border border-gray-300 px-3 py-2 text-sm"
              />
              <p class="text-xs text-gray-500 mt-1">
                Minimum stock before restocking is required.
              </p>
            </div>
          </form>

          <!-- Action Buttons -->
          <div class="mt-6 flex justify-end space-x-3">
            <button id="cancel-add-item" class="h-10 px-4 text-sm font-medium rounded-lg text-gray-700 border border-gray-300 hover:bg-gray-50 transition-colors">Cancel</button>
            <button type="submit" form="add-item-form" id="confirm-add-item" class="h-10 px-4 text-sm font-semibold rounded-lg text-white bg-slate-700 hover:bg-slate-800 transition-colors">Add Item</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Stock In / Stock Out Dialogs -->
    <!-- Used to adjust quantity for an existing inventory item (handled by script.js) -->
    <div id="stock-in-dialog" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 hidden">
      <div class="bg-white rounded-lg shadow-xl w-full max-w-md m-4">
        <div class="p-6">
          <h3 class="text-xl font-semibold text-green-700">Stock In</h3>
          <p id="stock-in-item-name" class="text-sm text-gray-500 mt-1">
            Add stock for: Item Name
          </p>
          <div class="mt-4 space-y-4">
            <div>
              <label
                for="stock-in-amount"
                class="block text-sm font-medium text-gray-700"
                >Quantity to Add</label
              >
              <input
                type="number"
                id="stock-in-amount"
                placeholder="0"
                class="mt-1 block w-full h-10 rounded-lg border border-gray-300 px-3 py-2 text-sm"
              />
            </div>
            <div class="p-3 bg-green-50 rounded-lg border border-green-200">
              <p id="stock-in-current-stock" class="text-sm text-green-800">
                Current Stock: 0 units
              </p>
            </div>
          </div>
          <div class="mt-6 flex justify-end space-x-3">
            <button
              id="cancel-stock-in"
              class="h-10 px-4 text-sm font-medium rounded-lg text-gray-700 border border-gray-300 hover:bg-gray-50 transition-colors"
            >
              Cancel
            </button>
            <button
              id="confirm-stock-in"
              class="h-10 px-4 text-sm font-semibold rounded-lg text-white bg-green-600 hover:bg-green-700 transition-colors"
            >
              Confirm Stock In
            </button>
          </div>
        </div>
      </div>
    </div>

    <div id="stock-out-dialog" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50 hidden">
      <div class="bg-white rounded-lg shadow-xl w-full max-w-md m-4">
        <div class="p-6">
          <h3 class="text-xl font-semibold text-red-700">Stock Out</h3>
          <p id="stock-out-item-name" class="text-sm text-gray-500 mt-1">
            Remove stock for: Item Name
          </p>
          <div class="mt-4 space-y-4">
            <div>
              <label
                for="stock-out-amount"
                class="block text-sm font-medium text-gray-700"
                >Quantity to Remove</label
              >
              <input
                type="number"
                id="stock-out-amount"
                placeholder="0"
                class="mt-1 block w-full h-10 rounded-lg border border-gray-300 px-3 py-2 text-sm"
              />
            </div>
            <div class="p-3 bg-red-50 rounded-lg border border-red-200">
              <p id="stock-out-current-stock" class="text-sm text-red-800">
                Current Stock: 0 units
              </p>
            </div>
          </div>
          <div class="mt-6 flex justify-end space-x-3">
            <button
              id="cancel-stock-out"
              class="h-10 px-4 text-sm font-medium rounded-lg text-gray-700 border border-gray-300 hover:bg-gray-50 transition-colors"
            >
              Cancel
            </button>
            <button
              id="confirm-stock-out"
              class="h-10 px-4 text-sm font-semibold rounded-lg text-white bg-red-600 hover:bg-red-700 transition-colors"
            >
              Confirm Stock Out
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="./script.js"></script>
    <script>
      // Initialize lucide icons for all icon placeholders
      lucide.createIcons();
    </script>
  </body>
</html>
